// _codegalaxy.scss - Unified theme system
@mixin codegalaxy-theme($theme) {
  // First define ALL variables with default values
  $background-dark: #ffffff !default; // Light theme default
  $background-medium: #f0f0f0 !default;
  $background-light: #e0e0e0 !default;
  $text-primary: #333333 !default;
  $text-secondary: #b0b0b0 !default;
  $text-white: black !default;
  $border-color: #979797 !default;

  // Then override for dark theme
  @if $theme == 'dark' {
    $background-dark: #1e1e1e;
    $background-medium: #2d2d2d;
    $background-light: #363636;
    $text-primary: #e0e0e0;
    $text-secondary: #696969;
    $text-white: white;
    $border-color: #363636;
  }

  // Common variables (not theme-specific)
  $font-size-large: 24px;
  $border-radius: 8;
  $tab-size: 4;
  $error-color: #ff4444;
  $warning-color: #ffaa00;
  $info-color: #4444ff;

  // All style rules
  .styled-text-area {
    -fx-font-size: $font-size-large;
    -fx-background-color: $background-dark;

    .caret {
      -fx-stroke: $text-white;
    }
  }

  .main-selection {
    -fx-fill: $text-secondary;
  }

  .line-highlighter {
    -fx-fill: $background-light;
  }

  .line-number-text {
    -fx-fill: $text-primary;
  }

  .line-number-box {
    -fx-background-color: $background-dark;
    -fx-border-color: $border-color;
    -fx-border-width: 0 1 0 0;
  }

  .text-flow {
    .text {
      -fx-fill: $text-primary;
    }
  }

  .error-line-number {
    -fx-background-color: $background-medium;
  }

  .error-indicator {
    -fx-background-radius: $border-radius;
    -fx-border-radius: $border-radius;

    &.error {
      -fx-background-color: $error-color;
    }

    &.warning {
      -fx-background-color: $warning-color;
    }

    &.info {
      -fx-background-color: $info-color;
    }
  }

  .paragraph-text {
    -fx-tab-size: $tab-size;
  }
}

// Generate dark theme
.codegalaxy-dark {
  @include codegalaxy-theme('dark');
}

// Generate light theme
.codegalaxy-light {
  @include codegalaxy-theme('light');
}